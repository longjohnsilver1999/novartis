<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Trial Data Integration Platform - PS-1 Prototype</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1E7480;
            --primary-light: #2BA598;
            --primary-dark: #134252;
            --secondary: #8B6B47;
            --success: #22CA94;
            --warning: #E6814C;
            --danger: #C01530;
            --info: #6C757D;
            --light: #F5F5F5;
            --dark: #1F2121;
            --white: #FFFFFF;
            --border: #D4D4D4;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--light);
            color: var(--dark);
        }

        /* Layout */
        .container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: var(--primary-dark);
            color: var(--white);
            overflow-y: auto;
            padding: 20px;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
        }

        .sidebar h1 {
            font-size: 18px;
            margin-bottom: 30px;
            font-weight: 600;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 15px;
        }

        .nav-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .nav-item:hover {
            background: var(--primary);
        }

        .nav-item.active {
            background: var(--primary);
            font-weight: 600;
            border-left: 4px solid var(--success);
        }

        /* Main Content */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header */
        .header {
            background: var(--white);
            border-bottom: 1px solid var(--border);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .header h2 {
            font-size: 24px;
            color: var(--primary-dark);
        }

        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            font-size: 13px;
        }

        .btn-primary {
            background: var(--primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-light);
        }

        .btn-secondary {
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--white);
            border-color: var(--primary);
        }

        /* Content Area */
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-left: 4px solid var(--primary);
        }

        .card.danger {
            border-left-color: var(--danger);
        }

        .card.warning {
            border-left-color: var(--warning);
        }

        .card.success {
            border-left-color: var(--success);
        }

        .card h3 {
            font-size: 14px;
            color: var(--info);
            margin-bottom: 8px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .card .value {
            font-size: 32px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .card .unit {
            font-size: 12px;
            color: var(--info);
        }

        .card .trend {
            font-size: 13px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--light);
        }

        .trend-up {
            color: var(--success);
        }

        .trend-down {
            color: var(--danger);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        table thead {
            background: var(--primary-dark);
            color: var(--white);
        }

        table th {
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 12px;
        }

        table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--light);
            font-size: 13px;
        }

        table tbody tr:hover {
            background: #f9f9f9;
        }

        /* Status Badge */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(34, 202, 148, 0.2);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(230, 129, 97, 0.2);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(192, 21, 47, 0.2);
            color: var(--danger);
        }

        .badge-info {
            background: rgba(108, 117, 125, 0.2);
            color: var(--info);
        }

        /* Heat Map */
        .heatmap {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin: 15px 0;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
            color: var(--white);
            cursor: pointer;
            transition: all 0.3s;
        }

        .heatmap-cell:hover {
            transform: scale(1.1);
        }

        .cell-green { background: #22CA94; }
        .cell-yellow { background: #FFC107; color: var(--dark); }
        .cell-orange { background: #E6814C; }
        .cell-red { background: #C01530; }

        /* Section Headers */
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: var(--primary);
            border-radius: 2px;
        }

        /* Forms */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 13px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 116, 128, 0.1);
        }

        /* Alerts */
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 13px;
        }

        .alert-danger {
            background: rgba(192, 21, 47, 0.1);
            border-left: 4px solid var(--danger);
            color: var(--danger);
        }

        .alert-warning {
            background: rgba(230, 129, 97, 0.1);
            border-left: 4px solid var(--warning);
            color: var(--warning);
        }

        .alert-success {
            background: rgba(34, 202, 148, 0.1);
            border-left: 4px solid var(--success);
            color: var(--success);
        }

        /* Progress Bar */
        .progress {
            height: 24px;
            background: var(--light);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 11px;
            font-weight: 600;
            transition: width 0.3s;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--white);
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .modal-header {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            margin-top: 30px;
            justify-content: flex-end;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--info);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 220px;
            }

            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-height: 150px;
                overflow-x: auto;
                display: flex;
                gap: 10px;
            }

            .main {
                height: auto;
                flex: 1;
            }

            .header {
                flex-direction: column;
                gap: 15px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 12px;
            }

            table th, table td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar Navigation -->
        <div class="sidebar">
            <h1>TRIAL CONTROL</h1>
            <div class="nav-item active" onclick="switchView('executive')">üìä Executive Dashboard</div>
            <div class="nav-item" onclick="switchView('sites')">üè• Site Performance</div>
            <div class="nav-item" onclick="switchView('quality')">‚úì Data Quality Monitor</div>
            <div class="nav-item" onclick="switchView('safety')">‚ö†Ô∏è Safety & Coding</div>
            <div class="nav-item" onclick="switchView('subjects')">üë• Subject Details</div>
            <div class="nav-item" onclick="switchView('dqi')">üìà DQI Analytics</div>
        </div>

        <!-- Main Content -->
        <div class="main">
            <!-- Header -->
            <div class="header">
                <h2 id="page-title">Executive Dashboard</h2>
                <div class="header-controls">
                    <select class="form-group" style="width: 180px; margin: 0;">
                        <option>All Studies</option>
                        <option selected>TRIAL-2025-001</option>
                        <option>TRIAL-2025-002</option>
                    </select>
                    <button class="btn btn-secondary">üîÑ Refresh</button>
                    <button class="btn btn-primary">üì• Export Report</button>
                </div>
            </div>

            <!-- Content Area -->
            <div class="content">

                <!-- EXECUTIVE DASHBOARD VIEW -->
                <div id="executive" class="view active">
                    <div class="alert alert-success">
                        ‚úì Database Quality: Excellent. Ready for interim analysis. DQI Score: 94/100
                    </div>

                    <div class="dashboard-grid">
                        <div class="card success">
                            <h3>DQI Score</h3>
                            <div class="value">94</div>
                            <div class="unit">/100 - Excellent</div>
                            <div class="trend trend-up">‚Üë +2 points this week</div>
                        </div>
                        <div class="card success">
                            <h3>Enrollment</h3>
                            <div class="value">847</div>
                            <div class="unit">/ 1000 subjects (85%)</div>
                            <div class="trend trend-up">‚Üë On pace for completion</div>
                        </div>
                        <div class="card success">
                            <h3>Clean Subjects</h3>
                            <div class="value">623</div>
                            <div class="unit">73.5% - All criteria met</div>
                            <div class="trend trend-up">‚Üë +3% this week</div>
                        </div>
                        <div class="card warning">
                            <h3>Open Queries</h3>
                            <div class="value">142</div>
                            <div class="unit">1.68% of subjects</div>
                            <div class="trend trend-down">‚Üì Avg resolution: 3.2 days</div>
                        </div>
                        <div class="card success">
                            <h3>Visit Completion</h3>
                            <div class="value">96.5%</div>
                            <div class="unit">2847 / 2950 visits</div>
                            <div class="trend trend-up">‚Üë 42 subjects overdue</div>
                        </div>
                        <div class="card warning">
                            <h3>Lab Issues</h3>
                            <div class="value">28</div>
                            <div class="unit">Missing ranges/names</div>
                            <div class="trend">Action: 3 sites require follow-up</div>
                        </div>
                    </div>

                    <div class="section-title">Risk Summary</div>
                    <div class="dashboard-grid">
                        <div class="card danger">
                            <h3>Critical Issues</h3>
                            <div class="value">3</div>
                            <div class="unit">Require immediate action</div>
                            <div class="trend">Site-101: Missing safety data (21 days overdue)</div>
                        </div>
                        <div class="card warning">
                            <h3>High-Risk Sites</h3>
                            <div class="value">4</div>
                            <div class="unit">Intensive monitoring</div>
                            <div class="trend">Sites: 045, 087, 112, 156</div>
                        </div>
                        <div class="card info" style="border-left-color: var(--info);">
                            <h3>Recommended Actions</h3>
                            <div class="value">7</div>
                            <div class="unit">AI-generated insights</div>
                            <div class="trend">View detailed recommendations below</div>
                        </div>
                    </div>

                    <div class="section-title">Site Performance Heat Map</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Site ID</th>
                                <th>Region</th>
                                <th>Enrolled</th>
                                <th>DQI</th>
                                <th>Status</th>
                                <th>Key Issue</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Site-001</strong></td>
                                <td>North America</td>
                                <td>42</td>
                                <td><span class="badge badge-success">96</span></td>
                                <td><span class="badge badge-success">Excellent</span></td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td><strong>Site-045</strong></td>
                                <td>Europe</td>
                                <td>31</td>
                                <td><span class="badge badge-warning">72</span></td>
                                <td><span class="badge badge-warning">At Risk</span></td>
                                <td>High query density (4.2%)</td>
                            </tr>
                            <tr>
                                <td><strong>Site-101</strong></td>
                                <td>APAC</td>
                                <td>28</td>
                                <td><span class="badge badge-danger">45</span></td>
                                <td><span class="badge badge-danger">Critical</span></td>
                                <td>Safety data missing (21 days)</td>
                            </tr>
                            <tr>
                                <td><strong>Site-087</strong></td>
                                <td>Europe</td>
                                <td>36</td>
                                <td><span class="badge badge-warning">68</span></td>
                                <td><span class="badge badge-warning">At Risk</span></td>
                                <td>SDV completion only 65%</td>
                            </tr>
                            <tr>
                                <td><strong>Site-156</strong></td>
                                <td>North America</td>
                                <td>39</td>
                                <td><span class="badge badge-success">88</span></td>
                                <td><span class="badge badge-success">Good</span></td>
                                <td>Lab range issues (3 items)</td>
                            </tr>
                        </tbody>
                    </table>

                    <br>
                    <div class="section-title">AI-Generated Insights & Recommendations</div>
                    <div style="background: var(--white); border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                        <p style="margin-bottom: 15px; line-height: 1.6; font-size: 13px;">
                            <strong>üî¥ CRITICAL: Site-101 Safety Data</strong><br>
                            Subject ID-101-0847 has missing adverse event follow-up data for 21 days (exceeds protocol requirement of 14 days). Recommend immediate CRA intervention to collect remaining safety information. This blocks database lock and interim analysis.
                        </p>
                        <p style="margin-bottom: 15px; line-height: 1.6; font-size: 13px;">
                            <strong>üü† HIGH: Sites 045 & 087 Data Quality Trends</strong><br>
                            Both sites show declining DQI scores over past 2 weeks (-3 to -5 points). Root cause analysis indicates increased query density (>3.5% vs. trial average 1.7%) and lower query closure rates. Recommend CRA monitoring visit with focus on staff training and workflow optimization.
                        </p>
                        <p style="margin-bottom: 15px; line-height: 1.6; font-size: 13px;">
                            <strong>üü° MEDIUM: Lab Data Quality Issues</strong><br>
                            28 lab tests missing reference ranges or lab names across 8 sites. Impact: Cannot validate lab result accuracy. Estimated resolution time: 3-5 days with site follow-up.
                        </p>
                        <p style="line-height: 1.6; font-size: 13px;">
                            <strong>‚úì POSITIVE: Enrollment Momentum</strong><br>
                            Current enrollment pace (847 subjects, 85% of target) suggests trial completion on schedule. At this rate, database lock expected Week 8 with DQI >90.
                        </p>
                    </div>
                </div>

                <!-- SITE PERFORMANCE VIEW -->
                <div id="sites" class="view">
                    <div class="section-title">Site Performance Analytics</div>
                    
                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>Top Performer</h3>
                            <div style="font-size: 16px; font-weight: 600; color: var(--success); margin: 10px 0;">Site-001 (North America)</div>
                            <div class="unit">DQI: 96/100 | 42 enrolled | Query Rate: 0.8%</div>
                        </div>
                        <div class="card danger">
                            <h3>Needs Attention</h3>
                            <div style="font-size: 16px; font-weight: 600; color: var(--danger); margin: 10px 0;">Site-101 (APAC)</div>
                            <div class="unit">DQI: 45/100 | Missing safety data | 21 days overdue</div>
                        </div>
                        <div class="card warning">
                            <h3>Trend Alert</h3>
                            <div style="font-size: 16px; font-weight: 600; color: var(--warning); margin: 10px 0;">Sites 045, 087</div>
                            <div class="unit">Declining DQI | High query density | Enhanced monitoring recommended</div>
                        </div>
                    </div>

                    <div class="section-title">Site Comparison Table</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Site ID</th>
                                <th>Region</th>
                                <th>PI</th>
                                <th>Enrolled</th>
                                <th>On-Time Visits</th>
                                <th>DQI</th>
                                <th>Query Rate</th>
                                <th>Performance</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Site-001</strong></td>
                                <td>North America</td>
                                <td>Dr. Smith</td>
                                <td>42</td>
                                <td>100%</td>
                                <td><span class="badge badge-success">96</span></td>
                                <td>0.8%</td>
                                <td><span class="badge badge-success">Excellent</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-034</strong></td>
                                <td>North America</td>
                                <td>Dr. Johnson</td>
                                <td>38</td>
                                <td>98%</td>
                                <td><span class="badge badge-success">91</span></td>
                                <td>1.2%</td>
                                <td><span class="badge badge-success">Excellent</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-156</strong></td>
                                <td>North America</td>
                                <td>Dr. Wilson</td>
                                <td>39</td>
                                <td>97%</td>
                                <td><span class="badge badge-success">88</span></td>
                                <td>1.8%</td>
                                <td><span class="badge badge-success">Good</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-045</strong></td>
                                <td>Europe</td>
                                <td>Dr. Mueller</td>
                                <td>31</td>
                                <td>92%</td>
                                <td><span class="badge badge-warning">72</span></td>
                                <td>4.2%</td>
                                <td><span class="badge badge-warning">At Risk</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-087</strong></td>
                                <td>Europe</td>
                                <td>Dr. Laurent</td>
                                <td>36</td>
                                <td>88%</td>
                                <td><span class="badge badge-warning">68</span></td>
                                <td>3.8%</td>
                                <td><span class="badge badge-warning">At Risk</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-112</strong></td>
                                <td>Europe</td>
                                <td>Dr. Garcia</td>
                                <td>33</td>
                                <td>91%</td>
                                <td><span class="badge badge-warning">75</span></td>
                                <td>3.5%</td>
                                <td><span class="badge badge-warning">At Risk</span></td>
                            </tr>
                            <tr>
                                <td><strong>Site-101</strong></td>
                                <td>APAC</td>
                                <td>Dr. Patel</td>
                                <td>28</td>
                                <td>79%</td>
                                <td><span class="badge badge-danger">45</span></td>
                                <td>8.5%</td>
                                <td><span class="badge badge-danger">Critical</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- DATA QUALITY VIEW -->
                <div id="quality" class="view">
                    <div class="section-title">Data Quality Monitoring</div>
                    
                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>Missing Visits</h3>
                            <div class="value">103</div>
                            <div class="unit">3.5% of scheduled visits</div>
                            <div style="margin-top: 10px;">
                                <div class="progress"><div class="progress-bar" style="width: 96.5%;">96.5% Complete</div></div>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Missing Pages</h3>
                            <div class="value">247</div>
                            <div class="unit">1.2% of required pages</div>
                            <div style="margin-top: 10px;">
                                <div class="progress"><div class="progress-bar" style="width: 98.8%;">98.8% Complete</div></div>
                            </div>
                        </div>
                        <div class="card">
                            <h3>SDV Completion</h3>
                            <div class="value">94.2%</div>
                            <div class="unit">2851 / 3027 forms verified</div>
                            <div style="margin-top: 10px;">
                                <div class="progress"><div class="progress-bar" style="width: 94.2%;">94.2% Verified</div></div>
                            </div>
                        </div>
                    </div>

                    <div class="section-title">CRF Status & Missing Data</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Site</th>
                                <th>Subject ID</th>
                                <th>Visit</th>
                                <th>Missing Items</th>
                                <th>Days Overdue</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Site-045</td>
                                <td>045-0034</td>
                                <td>Week 12 Safety</td>
                                <td>2 pages</td>
                                <td>8</td>
                                <td><span class="badge badge-warning">Overdue</span></td>
                                <td><a href="#" style="color: var(--primary); font-weight: 500;">Follow-up</a></td>
                            </tr>
                            <tr>
                                <td>Site-087</td>
                                <td>087-0156</td>
                                <td>Week 8 Labs</td>
                                <td>Lab range data</td>
                                <td>5</td>
                                <td><span class="badge badge-warning">Pending</span></td>
                                <td><a href="#" style="color: var(--primary); font-weight: 500;">Request</a></td>
                            </tr>
                            <tr>
                                <td>Site-101</td>
                                <td>101-0847</td>
                                <td>Safety Follow-up</td>
                                <td>Outcome data</td>
                                <td>21</td>
                                <td><span class="badge badge-danger">CRITICAL</span></td>
                                <td><a href="#" style="color: var(--danger); font-weight: 500;">ESCALATE</a></td>
                            </tr>
                            <tr>
                                <td>Site-156</td>
                                <td>156-0892</td>
                                <td>Week 4 Vital Signs</td>
                                <td>1 query pending</td>
                                <td>0</td>
                                <td><span class="badge badge-info">In Review</span></td>
                                <td><a href="#" style="color: var(--primary); font-weight: 500;">View</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- SAFETY & CODING VIEW -->
                <div id="safety" class="view">
                    <div class="section-title">Safety & Medical Coding Monitor</div>
                    
                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>eSAE Pending Review</h3>
                            <div class="value">12</div>
                            <div class="unit">Serious Adverse Events</div>
                            <div class="trend">Avg review time: 2.1 days</div>
                        </div>
                        <div class="card warning">
                            <h3>Uncoded Medical Terms</h3>
                            <div class="value">84</div>
                            <div class="unit">Awaiting MedDRA coding</div>
                            <div class="trend">4 terms >14 days old</div>
                        </div>
                        <div class="card">
                            <h3>Uncoded Medications</h3>
                            <div class="value">23</div>
                            <div class="unit">Awaiting WHO Drug coding</div>
                            <div class="trend">All within 7-day SLA</div>
                        </div>
                    </div>

                    <div class="section-title">Serious Adverse Events (SAE) Status</div>
                    <table>
                        <thead>
                            <tr>
                                <th>SAE ID</th>
                                <th>Subject</th>
                                <th>Adverse Event</th>
                                <th>Seriousness</th>
                                <th>Days Open</th>
                                <th>Review Status</th>
                                <th>Action Required</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>SAE-001</td>
                                <td>045-0034</td>
                                <td>Hospitalization - Pneumonia</td>
                                <td><span class="badge badge-danger">Serious</span></td>
                                <td>3</td>
                                <td>Pending DM Review</td>
                                <td><a href="#" style="color: var(--primary); font-weight: 500;">Review Now</a></td>
                            </tr>
                            <tr>
                                <td>SAE-002</td>
                                <td>087-0156</td>
                                <td>Severe Allergic Reaction</td>
                                <td><span class="badge badge-danger">Serious</span></td>
                                <td>1</td>
                                <td>Pending Safety Review</td>
                                <td><a href="#" style="color: var(--primary); font-weight: 500;">Review Now</a></td>
                            </tr>
                            <tr>
                                <td>SAE-003</td>
                                <td>101-0847</td>
                                <td>Death</td>
                                <td><span class="badge badge-danger">Critical</span></td>
                                <td>8</td>
                                <td>Escalated to Regulatory</td>
                                <td><a href="#" style="color: var(--danger); font-weight: 500;">View Case</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- SUBJECT DETAILS VIEW -->
                <div id="subjects" class="view">
                    <div class="section-title">Subject-Level Data Quality Analysis</div>
                    
                    <div class="form-group">
                        <label>Search Subject ID or Site</label>
                        <input type="text" placeholder="e.g., 045-0034 or Site-045" style="width: 300px;">
                    </div>

                    <div style="background: var(--white); border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px; font-weight: 600;">Subject Profile: 045-0034</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; font-size: 13px;">
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Subject ID</div>
                                <div style="font-weight: 600;">045-0034</div>
                            </div>
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Site</div>
                                <div style="font-weight: 600;">Site-045 (Europe)</div>
                            </div>
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Enrollment Date</div>
                                <div style="font-weight: 600;">2025-08-15</div>
                            </div>
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Status</div>
                                <div style="font-weight: 600;"><span class="badge badge-warning">At Risk</span></div>
                            </div>
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Clean Patient Status</div>
                                <div style="font-weight: 600; color: var(--danger);">NOT CLEAN</div>
                            </div>
                            <div>
                                <div style="color: var(--info); margin-bottom: 5px;">Patient DQI Score</div>
                                <div style="font-weight: 600;">68/100 (Fair)</div>
                            </div>
                        </div>
                    </div>

                    <div class="section-title">Visit Progress & Data Status</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Visit</th>
                                <th>Scheduled</th>
                                <th>Completed</th>
                                <th>Pages Missing</th>
                                <th>Open Queries</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Baseline</strong></td>
                                <td>2025-08-15</td>
                                <td>2025-08-16</td>
                                <td>0</td>
                                <td>0</td>
                                <td><span class="badge badge-success">Complete</span></td>
                            </tr>
                            <tr>
                                <td><strong>Week 4</strong></td>
                                <td>2025-09-12</td>
                                <td>2025-09-13</td>
                                <td>1 (Labs)</td>
                                <td>2</td>
                                <td><span class="badge badge-warning">Incomplete</span></td>
                            </tr>
                            <tr>
                                <td><strong>Week 8</strong></td>
                                <td>2025-10-10</td>
                                <td>2025-10-11</td>
                                <td>0</td>
                                <td>0</td>
                                <td><span class="badge badge-success">Complete</span></td>
                            </tr>
                            <tr>
                                <td><strong>Week 12</strong></td>
                                <td>2025-11-07</td>
                                <td>2025-11-14</td>
                                <td>2 (Safety)</td>
                                <td>3</td>
                                <td><span class="badge badge-warning">Overdue</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- DQI ANALYTICS VIEW -->
                <div id="dqi" class="view">
                    <div class="section-title">Data Quality Index (DQI) Deep Dive</div>
                    
                    <div style="background: var(--white); border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); margin-bottom: 20px;">
                        <h3 style="margin-bottom: 20px; font-weight: 600;">DQI Formula & Calculation</h3>
                        <p style="font-size: 13px; line-height: 1.8; margin-bottom: 15px;">
                            <strong>DQI = (W1 √ó Clean_CRF%) + (W2 √ó Visit_Completion%) + (W3 √ó Query_Resolution%)<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ (W4 √ó Safety_Status%) + (W5 √ó Verification_Status%) - (W6 √ó Issues_Density)</strong>
                        </p>
                        <p style="font-size: 13px;">
                            <strong>Current Trial Values:</strong><br>
                            ‚Ä¢ Clean_CRF% = 96% (W1=0.25) ‚Üí 24.0 points<br>
                            ‚Ä¢ Visit_Completion% = 96.5% (W2=0.20) ‚Üí 19.3 points<br>
                            ‚Ä¢ Query_Resolution% = 94% (W3=0.20) ‚Üí 18.8 points<br>
                            ‚Ä¢ Safety_Status% = 100% (W4=0.15) ‚Üí 15.0 points<br>
                            ‚Ä¢ Verification_Status% = 94.2% (W5=0.15) ‚Üí 14.1 points<br>
                            ‚Ä¢ Issues_Density = 2.1% (W6=0.05) ‚Üí -1.05 points<br><br>
                            <strong style="color: var(--primary); font-size: 14px;">TOTAL DQI = 90.15 ‚Üí Rounded to 90/100 (GOOD)</strong>
                        </p>
                    </div>

                    <div class="dashboard-grid">
                        <div class="card">
                            <h3>Trial DQI Score</h3>
                            <div class="value">94</div>
                            <div class="unit">/100 - Excellent</div>
                            <div class="progress" style="margin-top: 15px;"><div class="progress-bar" style="width: 94%;">94</div></div>
                        </div>
                        <div class="card">
                            <h3>Site-001 DQI</h3>
                            <div class="value">96</div>
                            <div class="unit">/100 - Excellent</div>
                            <div class="progress" style="margin-top: 15px;"><div class="progress-bar" style="width: 96%; background: var(--success);">96</div></div>
                        </div>
                        <div class="card warning">
                            <h3>Site-045 DQI</h3>
                            <div class="value">72</div>
                            <div class="unit">/100 - Fair</div>
                            <div class="progress" style="margin-top: 15px;"><div class="progress-bar" style="width: 72%; background: var(--warning);">72</div></div>
                        </div>
                        <div class="card danger">
                            <h3>Site-101 DQI</h3>
                            <div class="value">45</div>
                            <div class="unit">/100 - Critical</div>
                            <div class="progress" style="margin-top: 15px;"><div class="progress-bar" style="width: 45%; background: var(--danger);">45</div></div>
                        </div>
                    </div>

                    <div class="section-title">Component Breakdown (Trial Average)</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Weight</th>
                                <th>Current Value</th>
                                <th>Target Value</th>
                                <th>Status</th>
                                <th>Trend</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Clean CRFs %</strong></td>
                                <td>25%</td>
                                <td>96%</td>
                                <td>‚â•95%</td>
                                <td><span class="badge badge-success">Met</span></td>
                                <td>‚Üë +1% WoW</td>
                            </tr>
                            <tr>
                                <td><strong>Visit Completion %</strong></td>
                                <td>20%</td>
                                <td>96.5%</td>
                                <td>‚â•95%</td>
                                <td><span class="badge badge-success">Met</span></td>
                                <td>‚Üí Stable</td>
                            </tr>
                            <tr>
                                <td><strong>Query Resolution %</strong></td>
                                <td>20%</td>
                                <td>94%</td>
                                <td>‚â•90%</td>
                                <td><span class="badge badge-success">Met</span></td>
                                <td>‚Üë +2% WoW</td>
                            </tr>
                            <tr>
                                <td><strong>Safety Status %</strong></td>
                                <td>15%</td>
                                <td>100%</td>
                                <td>100%</td>
                                <td><span class="badge badge-success">Met</span></td>
                                <td>‚úì Complete</td>
                            </tr>
                            <tr>
                                <td><strong>Verification Status %</strong></td>
                                <td>15%</td>
                                <td>94.2%</td>
                                <td>‚â•90%</td>
                                <td><span class="badge badge-success">Met</span></td>
                                <td>‚Üë +0.5% WoW</td>
                            </tr>
                            <tr>
                                <td><strong>Issues Density (Penalty)</strong></td>
                                <td>5%</td>
                                <td>2.1%</td>
                                <td>‚â§2%</td>
                                <td><span class="badge badge-warning">At Threshold</span></td>
                                <td>‚Üì -0.3% WoW</td>
                            </tr>
                        </tbody>
                    </table>

                    <br>
                    <div class="section-title">DQI Score Interpretation Guide</div>
                    <div style="background: var(--white); border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                        <table style="margin: 0;">
                            <thead>
                                <tr>
                                    <th>Score Range</th>
                                    <th>Status</th>
                                    <th>Interpretation</th>
                                    <th>Action Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>90-100</strong></td>
                                    <td><span class="badge badge-success">Excellent</span></td>
                                    <td>Trial ready for interim analysis or database lock</td>
                                    <td>Routine monitoring</td>
                                </tr>
                                <tr>
                                    <td><strong>80-89</strong></td>
                                    <td><span class="badge badge-success">Good</span></td>
                                    <td>Minor issues identified; additional follow-up recommended</td>
                                    <td>Proactive intervention</td>
                                </tr>
                                <tr>
                                    <td><strong>70-79</strong></td>
                                    <td><span class="badge badge-warning">Fair</span></td>
                                    <td>Significant issues; remediation required before database lock</td>
                                    <td>Enhanced monitoring + CRA visits</td>
                                </tr>
                                <tr>
                                    <td><strong>60-69</strong></td>
                                    <td><span class="badge badge-warning">Poor</span></td>
                                    <td>Major issues blocking trial readiness; urgent action needed</td>
                                    <td>Intensive intervention</td>
                                </tr>
                                <tr>
                                    <td><strong>&lt;60</strong></td>
                                    <td><span class="badge badge-danger">Critical</span></td>
                                    <td>Trial/site cannot proceed; stop and investigate</td>
                                    <td>Escalation to governance</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // View Navigation
        function switchView(viewId) {
            // Hide all views
            document.querySelectorAll('.view').forEach(el => {
                el.classList.remove('active');
            });

            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });

            // Show selected view
            document.getElementById(viewId).classList.add('active');

            // Mark nav item as active
            event.target.classList.add('active');

            // Update page title
            const titles = {
                executive: 'Executive Dashboard',
                sites: 'Site Performance Analytics',
                quality: 'Data Quality Monitoring',
                safety: 'Safety & Medical Coding Monitor',
                subjects: 'Subject-Level Data Quality',
                dqi: 'Data Quality Index (DQI) Analytics'
            };
            document.getElementById('page-title').textContent = titles[viewId];
        }

        // Simulate real-time updates
        setInterval(() => {
            const metrics = document.querySelectorAll('.card .value');
            metrics.forEach(metric => {
                if (metric.parentElement.classList.contains('card')) {
                    // Add slight visual feedback for updates
                    metric.style.transition = 'color 0.3s';
                }
            });
        }, 5000);
    </script>
</body>
</html>
